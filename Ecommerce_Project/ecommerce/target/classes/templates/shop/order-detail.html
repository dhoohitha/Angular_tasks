<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><title>Order Detail</title></head>
<body>
<a href="/admin/orders">‚Üê Orders</a>
<h2>Order #<span th:text="${order.id}">0</span></h2>

<p>User: <b th:text="${order.user.username}">user</b></p>
<p>Placed: <span th:text="${#temporals.format(order.createdAt, 'dd-MMM-yyyy HH:mm')}">date</span></p>
<p>Status: <b th:text="${order.status}">NEW</b></p>
<p>Ship to: <pre th:text="${order.shippingAddress}"></pre></p>

<table border="1" cellpadding="6">
  <tr><th>Product</th><th>Unit</th><th>Qty</th><th>Total</th></tr>
  <tr th:each="it : ${order.items}">
    <td th:text="${it.productName}"></td>
    <td th:text="${it.unitPrice}"></td>
    <td th:text="${it.quantity}"></td>
    <td th:text="${it.lineTotal}"></td>
  </tr>
</table>

<p>Subtotal: <b th:text="${order.subtotal}"></b></p>
<p>Total: <b th:text="${order.total}"></b></p>

<h3>Update Status</h3>
<form th:action="@{'/admin/orders/' + ${order.id} + '/status'}" method="post">
  <select name="to">
    <!-- Show only sensible next states -->
    <option th:if="${order.status.name() == 'NEW'}" value="PAID">PAID</option>
    <option th:if="${order.status.name() == 'NEW'}" value="CANCELED">CANCELED</option>
    <option th:if="${order.status.name() == 'PAID'}" value="SHIPPED">SHIPPED</option>
  </select>
  <button type="submit">Change</button>
</form>

</body>

</html>
